<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>多物体运动问题</title>
	<style>
		#div1{width:100px;height:50px;background:red;margin: 10px;}
	</style>
	<script>
	window.onload=function(){
		var oDiv=document.getElementsByTagName('div');

		for(var i=0;i<oDiv.length;i++){
			/*oDiv[i].index 自定义属性，自定义一个定时器，每个div都有自己的定时器*/
			oDiv[i].timer=null;
			oDiv[i].onmouseover=function(){
				startMove(this,400);
			};
			oDiv[i].onmouseout=function(){
				startMove(this,100);
			};
		};
	}
		/*var timer=null;*///bug:一个定时器，导致在执行第一个div时，还没执行完，被清除了

		function startMove(obj,iTarget){
			clearInterval(obj.timer);
			//bug:一个定时器，导致在执行第一个div时，还没执行完，被清除了
			obj.timer=setInterval(function(){
				var speed=(iTarget-obj.offsetWidth)/6;
				speed=speed>0?Math.ceil(speed):Math.floor(speed);

				if(obj.offsetWidth==iTarget){
					clearInterval(obj.timer);
				}
				else{
					obj.style.width=obj.offsetWidth+speed+'px';
				}
			},30);
		}
	</script>
</head>
<body>
	<div id="div1"></div>
	<div id="div1"></div>
	<div id="div1"></div>
</body>
</html>